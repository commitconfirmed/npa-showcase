{# Used by conf_bird_server.j2 #}

{# Overkill for just 1 session/neighbor, but want to keep the BGP YAML syntax consistent #}
# BGP Configuration
protocol bgp {
{% for session in bgp.sessions %}
  description "{{ session.name }}";
  local {{ bgp.router_id }} as {{ bgp.local_as }};
{%     if session.type == "unnumbered" %}
  neighbor as {{ session.remote_as }};
{%         for neighbor in session.neighbors %}
  interface {{ neighbor.int }};
{%         endfor %}
{%     endif %}
  ipv4 {
  	import all;
  	export where source ~ [ RTS_DIRECT ];
    extended next hop on;
  };
  ipv6 {
  	import all;
  	export where source ~ [ RTS_DIRECT ];
  };
{% endfor %}
}